$(document).ready(function(){if($.ajaxSetup({headers:{"X-CSRF-Token":$("meta[name=_token]").attr("content")}}),1==$("#admingraphtrigger").val()){var t=Date.now()+-2592e5;startpoint=new Date(t),$.post("/admingraphdata",{year:startpoint.getFullYear(),month:startpoint.getMonth()+1,date:startpoint.getDate()},function(t,e,a){Highcharts.chart("admingraph",{title:{text:"Overview of Requests/Appointments"},subtitle:{text:"Based on dental and medical appointments, laboratory and x-ray requests"},xAxis:{type:"datetime"},yAxis:{title:{text:"Number of Requests/Appointments"}},legend:{layout:"vertical",align:"right",verticalAlign:"middle"},plotOptions:{series:{pointStart:Date.UTC(startpoint.getFullYear(),startpoint.getMonth(),startpoint.getDate()),pointInterval:864e5}},series:[{name:"Dental Appointments",data:[t.dental_appointment_count[0],t.dental_appointment_count[1],t.dental_appointment_count[2],t.dental_appointment_count[3],t.dental_appointment_count[4],t.dental_appointment_count[5],t.dental_appointment_count[6]]},{name:"Medical Appointments",data:[t.medical_appointment_count[0],t.medical_appointment_count[1],t.medical_appointment_count[2],t.medical_appointment_count[3],t.medical_appointment_count[4],t.medical_appointment_count[5],t.medical_appointment_count[6]]},{name:"CBC",data:[t.cbc_request_count[0],t.cbc_request_count[1],t.cbc_request_count[2],t.cbc_request_count[3],t.cbc_request_count[4],t.cbc_request_count[5],t.cbc_request_count[6]]},{name:"Fecalysis",data:[t.fecalysis_request_count[0],t.fecalysis_request_count[1],t.fecalysis_request_count[2],t.fecalysis_request_count[3],t.fecalysis_request_count[4],t.fecalysis_request_count[5],t.fecalysis_request_count[6]]},{name:"Drug Test",data:[t.drug_test_request_count[0],t.drug_test_request_count[1],t.drug_test_request_count[2],t.drug_test_request_count[3],t.drug_test_request_count[4],t.drug_test_request_count[5],t.drug_test_request_count[6]]},{name:"Urinalysis",data:[t.urinalysis_request_count[0],t.urinalysis_request_count[1],t.urinalysis_request_count[2],t.urinalysis_request_count[3],t.urinalysis_request_count[4],t.urinalysis_request_count[5],t.urinalysis_request_count[6]]},{name:"Chest X-Ray",data:[t.chest_xray_request_count[0],t.chest_xray_request_count[1],t.chest_xray_request_count[2],t.chest_xray_request_count[3],t.chest_xray_request_count[4],t.chest_xray_request_count[5],t.chest_xray_request_count[6]]}]})}),$(".highcharts-container").css("height","405px")}$("#typeOfMedicalService").change(function(){var t=$(this).find(":selected")[0].value;$.ajax({type:"POST",url:displayMedicalServices,data:{service_type:t,_token:token},success:function(e){if(output=" ",e.display_medical_services){for(var a=0;a<e.display_medical_services.length;a++)output+="<tr><td>"+e.display_medical_services[a].service_description+"</td></tr>";output+='<tr><td></td><td></td><td><span style="float: right"><button id="editMedicalServicesButton_'+t+'" type="button" class="btn btn-success editMedicalServicesButton" data-toggle="modal">Add/Edit Record</button></span></td></tr>'}$("#displayMedicalServices").html(output),$("#displayMedicalServicesTable").show(),$(".editMedicalServicesButton").click(function(){var t=$(this).attr("id").split("_"),e=t[1];"medical"==e||"cbc"==e||"xray"==e?$(".addmoremedicalservices").css("display","block"):$(".addmoremedicalservices").css("display","none"),$.ajax({type:"POST",url:editMedicalServices,data:{service_type:e,_token:token},success:function(t){output=" ",footer=" ",output+="<tr><th>Service Description</th><th>Student Rate</td><th>Faculty/Staff/Dependent Rate</th><th>OPD Rate</th><th>Senior Rate</th></tr>";for(var a=0;a<t.display_medical_services.length;a++)"drugtest"==t.display_medical_services[a].service_type||"fecalysis"==t.display_medical_services[a].service_type||"urinalysis"==t.display_medical_services[a].service_type?output+="<tr class='medical_services_tr'><td><input type='text' class='form-control medical_services_description' value='"+t.display_medical_services[a].service_description+"'></td><td><input type='text' class='form-control student_rate' value='"+t.display_medical_services[a].student_rate+"'></td><td><input type='text' class='form-control faculty_staff_dependent_rate' value='"+t.display_medical_services[a].faculty_staff_dependent_rate+"'></td><td><input type='text' class='form-control opd_rate' value='"+t.display_medical_services[a].opd_rate+"'></td><td><input type='text' class='form-control senior_rate' value='"+t.display_medical_services[a].senior_rate+"'></td></tr>":output+="<tr class='medical_services_tr'><td><input type='text' class='form-control medical_services_description' value='"+t.display_medical_services[a].service_description+"'></td><td><input type='text' class='form-control student_rate' value='"+t.display_medical_services[a].student_rate+"'></td><td><input type='text' class='form-control faculty_staff_dependent_rate' value='"+t.display_medical_services[a].faculty_staff_dependent_rate+"'></td><td><input type='text' class='form-control opd_rate' value='"+t.display_medical_services[a].opd_rate+"'></td><td><input type='text' class='form-control senior_rate' value='"+t.display_medical_services[a].senior_rate+"'></td><td><button class='btn btn-danger btn-sm removemedicalservice'>x</button></td></tr>";footer+='<button type="button" class="btn btn-danger" data-dismiss="modal">Back</button><button type="button" class="btn btn-success" id="editMedicalServicesModal">Save Changes</button>',$("#savechangesbuttonmedical").html(footer),$("#displayMedicalServicesModal").html(output),$("#displayMedicalServicesTableModal").show(),setTimeout(function(){$("#editMedicalServices").modal()},3e3),$(".removemedicalservice").click(function(){$(this).closest("tr").remove()}),$("#editMedicalServicesModal").click(function(){var t=[];$(".medical_services_tr").each(function(){$(this).find(".medical_services_description").val()&&$(this).find(".student_rate").val()&&$(this).find(".faculty_staff_dependent_rate").val()&&$(this).find(".opd_rate").val()&&$(this).find(".senior_rate").val()&&t.push($(this).find(".medical_services_description").val()+"(:::)"+$(this).find(".student_rate").val()+"(:::)"+$(this).find(".faculty_staff_dependent_rate").val()+"(:::)"+$(this).find(".opd_rate").val()+"(:::)"+$(this).find(".senior_rate").val())}),t.length>0&&$.ajax({url:updateMedicalServices,type:"POST",dataType:"json",data:{medical_services:t,service_type:e,_token:token},success:function(t){$("#typeOfMedicalService").val($("#typeOfMedicalService option:first").val()),$("#displayMedicalServices").html('<div class="alert alert-success alert-dismissable"><a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>Successful!</div>'),$("#editMedicalServices").modal("hide")},error:function(t,e,a){}})})}})})}})}),$(".addmoremedicalservices").click(function(){$(this).parents(".add-more-medical").find("tbody").append("<tr class='medical_services_tr'><td><input type='text' class='form-control medical_services_description'></td><td><input type='text' class='form-control student_rate'></td><td><input type='text' class='form-control faculty_staff_dependent_rate'></td><td><input type='text' class='form-control opd_rate'></td><td><input type='text' class='form-control senior_rate'></td><td><button class='btn btn-danger btn-sm removemedicalservice'>x</button></td></tr>"),$(".removemedicalservice").click(function(){$(this).closest("tr").remove()})}),$("#typeOfPatientDental").change(function(){var t=$(this).find(":selected")[0].value;console.log(t),$.ajax({type:"POST",url:displayDentalServices,data:{patient_type_id:t,_token:token},success:function(t){}})}),$("#addapatientaccountpanel #user_name").keyup(function(t){$.post("/admin/checkifuserexists",{user_name:$("#addapatientaccountpanel #user_name").val()},function(t,e,a){"yes"==t.already_exists?($("#addapatientaccountpanel #user_name").attr("data-toggle","tooltip"),$("#addapatientaccountpanel #user_name").attr("title","User already exists!"),$("#addapatientaccountpanel #user_name").tooltip("show"),$("#addapatientaccountsubmit").attr("disabled","disabled")):($("#addapatientaccountpanel #user_name").tooltip("destroy"),$("#addapatientaccountsubmit").removeAttr("disabled"))})}),$("#staff_id").keyup(function(t){$.post("/admin/checkifuserexists",{user_name:$("#staff_id").val()},function(t,e,a){"yes"==t.already_exists?($("#staff_id").attr("data-toggle","tooltip"),$("#staff_id").attr("title","User already exists!"),$("#staff_id").tooltip("show"),$("#addstaffaccountsubmit").attr("disabled","disabled")):($("#staff_id").tooltip("destroy"),$("#addstaffaccountsubmit").removeAttr("disabled"))})})});