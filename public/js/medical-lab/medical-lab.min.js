$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-Token":$("meta[name=_token]").attr("content")}}),$('input:radio[name="cbc_radio"]').change(function(){"outside"==$(this).val()?($(".checkboxLabService").attr("disabled","disabled"),$("#hemoglobin-lab").removeAttr("disabled"),$("#hemasocrit-lab").removeAttr("disabled"),$("#wbc-lab").removeAttr("disabled")):($(".checkboxLabService").removeAttr("disabled"),$("#hemoglobin-lab").val(""),$("#hemasocrit-lab").val(""),$("#wbc-lab").val(""),$("#hemoglobin-lab").attr("disabled","disabled"),$("#hemasocrit-lab").attr("disabled","disabled"),$("#wbc-lab").attr("disabled","disabled"))});var a=0;$(".checkboxLabService").click(function(){$(this).is(":checked")?a++:a--,a>0?($("#hemoglobin-lab").removeAttr("disabled"),$("#hemasocrit-lab").removeAttr("disabled"),$("#wbc-lab").removeAttr("disabled")):($("#hemoglobin-lab").val(""),$("#hemasocrit-lab").val(""),$("#wbc-lab").val(""),$("#hemoglobin-lab").attr("disabled","disabled"),$("#hemasocrit-lab").attr("disabled","disabled"),$("#wbc-lab").attr("disabled","disabled"))}),$(".addLabResult").click(function(){$("#labdiagnosisaccordion textarea, #labdiagnosisaccordion select").removeAttr("disabled"),$('input[value="inside"]').prop("checked",!0),$(".cbc_radio").removeAttr("disabled"),$(".drug_radio").removeAttr("disabled"),$(".fecalysis_radio").removeAttr("disabled"),$(".urinalysis_radio").removeAttr("disabled"),$(".checkboxLabService").removeAttr("disabled").removeAttr("checked");var a=$(this).attr("id").split("_")[1];$("#laboratoryresult-lab #cbc_div, #laboratoryresult-lab #drug_test_div, #laboratoryresult-lab #fecalysis_div, #laboratoryresult-lab #urinalysis_div").hide(),$("#hemoglobin-lab, #hemasocrit-lab, #wbc-lab, #macroscopic-lab, #microscopic-lab, #rbc-lab, #pus-cells-lab").val(""),$("#drug-test-lab option").prop("selected",function(){return this.defaultSelected}),$("#albumin-lab option, #sugar-lab option").prop("selected",function(){return this.defaultSelected}),$("#cbcaccordion").hide(),$("#add-lab-result-footer").html(""),$.post("/viewlabdiagnosis",{medical_appointment_id:a},function(e,l,i){if(e.cbc_result&&($("#cbcaccordion").show(),$("#hemoglobin-lab").val(e.cbc_result.hemoglobin),e.cbc_result.hemoglobin&&$("#hemoglobin-lab").attr("disabled","disabled"),$("#hemasocrit-lab").val(e.cbc_result.hemasocrit),e.cbc_result.hemasocrit&&$("#hemasocrit-lab").attr("disabled","disabled"),$("#wbc-lab").val(e.cbc_result.wbc),e.cbc_result.wbc&&$("#wbc-lab").attr("disabled","disabled"),(e.cbc_result.hemoglobin||e.cbc_result.hemasocrit||e.cbc_result.wbc)&&($(".checkboxLabService").prop("disabled",!0),$(".cbc_radio").prop("disabled",!0)),$("#laboratoryresult-lab #cbc_div").show(),e.cbc_billing_status))for(var s=0;s<e.cbc_billing_status.length;s++)$("#"+e.cbc_billing_status[s].medical_service_id+".checkboxLabService").prop("checked",!0),$(".checkboxLabService").prop("disabled",!0),$("#patient_type_radio_lab").prop("disabled",!0);e.drug_test_result&&($("#drug-test-lab").val(e.drug_test_result.drug_test_result),e.drug_test_result.drug_test_result?($("#drug-test-lab").attr("disabled","disabled"),$(".checkboxLabService").prop("disabled",!0),$(".drug_radio").prop("disabled",!0)):($("#drug-test-lab").removeAttr("disabled"),$("#drug-test-lab option").prop("selected",function(){return this.defaultSelected})),$("#laboratoryresult-lab #drug_test_div").show()),e.fecalysis_result&&($("#macroscopic-lab").val(e.fecalysis_result.macroscopic),e.fecalysis_result.macroscopic?$("#macroscopic-lab").attr("disabled","disabled"):$("#macroscopic-lab").removeAttr("disabled"),$("#microscopic-lab").val(e.fecalysis_result.microscopic),e.fecalysis_result.microscopic?$("#microscopic-lab").attr("disabled","disabled"):$("#microscopic-lab").removeAttr("disabled"),$("#laboratoryresult-lab #fecalysis_div").show(),(e.fecalysis_result.macroscopic||e.fecalysis_result.microscopic)&&($(".checkboxLabService").prop("disabled",!0),$(".fecalysis_radio").prop("disabled",!0))),e.urinalysis_result&&($("#pus-cells-lab").val(e.urinalysis_result.pus_cells),e.urinalysis_result.pus_cells?$("#pus-cells-lab").attr("disabled","disabled"):$("#pus-cells-lab").removeAttr("disabled"),$("#rbc-lab").val(e.urinalysis_result.rbc),e.urinalysis_result.rbc?$("#rbc-lab").attr("disabled","disabled"):$("#rbc-lab").removeAttr("disabled"),$("#albumin-lab").val(e.urinalysis_result.albumin),e.urinalysis_result.albumin?$("#albumin-lab").attr("disabled","disabled"):($("#albumin-lab").removeAttr("disabled"),$("#albumin-lab option").prop("selected",function(){return this.defaultSelected})),$("#sugar-lab").val(e.urinalysis_result.sugar),e.urinalysis_result.sugar?$("#sugar-lab").attr("disabled","disabled"):($("#sugar-lab").removeAttr("disabled"),$("#sugar-lab option").prop("selected",function(){return this.defaultSelected})),$("#laboratoryresult-lab #urinalysis_div").show(),(e.urinalysis_result.pus_cells||e.urinalysis_result.rbc||e.urinalysis_result.albumin||e.urinalysis_result.sugar)&&($(".checkboxLabService").prop("disabled",!0),$(".urinalysis_radio").prop("disabled",!0))),$("#add-lab-result-footer").append('<button type="button" class="btn btn-success addLabResultButton" id="addLabResultButton_'+a+'">Save</button><button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>'),$(".addLabResultButton").click(function(){var a=$(this).attr("id").split("_")[1];cbc_services_id=[],$("input:checkbox.checkboxLabService").each(function(){$(this).is(":checked")&&!$(this).attr("disabled")&&cbc_services_id.push($(this).attr("id"))}),$.post("/updatelabdiagnosis",{medical_appointment_id:a,hemoglobin:$("#hemoglobin-lab").val(),hemasocrit:$("#hemasocrit-lab").val(),wbc:$("#wbc-lab").val(),cbc_radio:$("input[name='cbc_radio']:checked").val(),drug_test:$("#drug-test-lab").val(),drug_radio:$("input[name='drug_radio']:checked").val(),macroscopic:$("#macroscopic-lab").val(),microscopic:$("#microscopic-lab").val(),fecalysis_radio:$("input[name='fecalysis_radio']:checked").val(),pus_cells:$("#pus-cells-lab").val(),rbc:$("#rbc-lab").val(),albumin:$("#albumin-lab").val(),sugar:$("#sugar-lab").val(),urinalysis_radio:$("input[name='urinalysis_radio']:checked").val(),cbc_services_id:cbc_services_id,drug_service_id:e.drug_billing_service.id,fecalysis_service_id:e.fecalysis_billing_service.id,urinalysis_service_id:e.urinalysis_billing_service.id},function(e,l,i){$("#cbccountpanel").load(location.href+" #cbccount"),$("#drugtestcountpanel").load(location.href+" #drugtestcount"),$("#fecalysiscountpanel").load(location.href+" #fecalysiscount"),$("#urinalysiscountpanel").load(location.href+" #urinalysiscount"),"yes"==e["delete"]&&$("#addLabResult_"+a).closest("tr").remove(),$("#add-lab-result").modal("hide")})}),$("#add-lab-result").modal()})})});